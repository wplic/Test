<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
		"http://www.ibatis.com/dtd/sql-map-2.dtd">
<!-- iBatis SQL Map 文件 -->	
<sqlMap namespace="com.cssweb.F10.gazx.stock.pojo.ImportantActivity">
    <typeAlias alias="importantActivity" type="com.cssweb.F10.gazx.stock.pojo.ImportantActivity"/>
    <!--result map-->
    <resultMap id="importantActivityMap" class="importantActivity">
        <result column="SL" property="amount" jdbcType="double"/>
        <result column="DW" property="amountUnit" jdbcType="String" nullValue=""/>
        <result column="T_GSZB_ID" property="companyId" jdbcType="Long"/>
        <result column="HBLB" property="currencyType" jdbcType="String" nullValue=""/>
        <result column="T_ZYXW_ID" property="importantActivityId" jdbcType="Long"/>
        <result column="ZYXWLX" property="importantActivityType" jdbcType="String" nullValue=""/>
        <result column="SFGLJY" property="linkTransaction" jdbcType="String" nullValue=""/>
        <result column="DJ" property="price" jdbcType="double" nullValue="0"/>
        <result column="BL" property="proportion" jdbcType="double" nullValue="0"/>
        <result column="WBSM" property="textExplain" jdbcType="String" nullValue=""/>
		<result column="FSRQ" property="publishDate" jdbcType="java.util.Date" nullValue="1900/01/01 00:00:00"/>
    </resultMap> 
    
	<!-- 分页 -->
	<select id="pageCount" resultClass="Integer" parameterClass="map">
		select count(*) from ZYXW where SCBZ = 0 and GKBZ = 1
		<isNotNull prepend="and" property="companyId">
			T_GSZB_ID = #companyId#
		</isNotNull>
	</select>

	<select id="pageQuery" resultMap="importantActivityMap" parameterClass="map">
		SELECT * FROM ( 
			SELECT row_.*, ROWNUM rownum_ FROM ( 
				select SL,DW,T_GSZB_ID,HBLB,T_ZYXW_ID,ZYXWLX,SFGLJY,DJ,BL,WBSM,FSRQ from ZYXW where SCBZ = 0 and GKBZ = 1
				<isNotNull prepend="and" property="companyId">
					T_GSZB_ID = #companyId#
				</isNotNull> order by FSRQ desc
		) row_ WHERE ROWNUM &lt;= #endNum# ) r WHERE
		rownum_ &gt;#beginNum#
	</select> 
	
</sqlMap>	
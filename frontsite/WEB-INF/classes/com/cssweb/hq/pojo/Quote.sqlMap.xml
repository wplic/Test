<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
"http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="com.cssweb.hq.pojo.Quote">

<typeAlias alias="Quote" type="com.cssweb.hq.pojo.Quote"/>

<cacheModel id="QuoteCache" type="OSCACHE">
	    <flushInterval seconds="60"/>
	    <property name="size" value="10"/>
</cacheModel>

<resultMap id="QuoteMap" class="Quote">
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zrsp" column="ZRSP" jdbcType="Double"/>
		<result property="zjcj" column="ZJCJ" jdbcType="Double"/>
</resultMap>
<resultMap id="QuoteMap1" class="Quote">
 		<result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="exchange" column="EXCHANGE" jdbcType="Integer"/>
		<result property="sjw5" column="SJW5" jdbcType="Double"/>
		<result property="ssl5" column="SSL5" jdbcType="Long"/>
		<result property="sjw4" column="SJW4" jdbcType="Double"/>
		<result property="ssl4" column="SSL4" jdbcType="Long"/>
		<result property="sjw3" column="SJW3" jdbcType="Double"/>
		<result property="ssl3" column="SSL3" jdbcType="Long"/>
		<result property="sjw2" column="SJW2" jdbcType="Double"/>
		<result property="ssl2" column="SSL2" jdbcType="Long"/>
		<result property="sjw1" column="SJW1" jdbcType="Double"/>
		<result property="ssl1" column="SSL1" jdbcType="Long"/>
		<result property="bjw1" column="BJW1" jdbcType="Double"/>
		<result property="bsl1" column="BSL1" jdbcType="Long"/>
		<result property="bjw2" column="BJW2" jdbcType="Double"/>
		<result property="bsl2" column="BSL2" jdbcType="Long"/>
		<result property="bjw3" column="BJW3" jdbcType="Double"/>
		<result property="bsl3" column="BSL3" jdbcType="Long"/>
		<result property="bjw4" column="BJW4" jdbcType="Double"/>
		<result property="bsl4" column="BSL4" jdbcType="Long"/>
		<result property="bjw5" column="BJW5" jdbcType="Double"/>
		<result property="bsl5" column="BSL5" jdbcType="Long"/>
		<result property="zjcj" column="ZJCJ" jdbcType="Double"/>
		<result property="jrkp" column="JRKP" jdbcType="Double"/>
		<result property="zrsp" column="ZRSP" jdbcType="Double"/>
		<result property="zgcj" column="ZGCJ" jdbcType="Double"/>
		<result property="zdcj" column="ZDCJ" jdbcType="Double"/>
		<result property="cjsl" column="CJSL" jdbcType="Long"/>
		<result property="cjje" column="CJJE" jdbcType="Double"/>	
		<result property="zf" column="ZF" jdbcType="Double"/>
		<result property="amp" column="amp" jdbcType="Double"/>
		<result property="syl1" column="SYL1" jdbcType="Double"/>
</resultMap>
<resultMap id="QuoteMap2" class="Quote">
		<result property="zrsp" column="ZRSP" jdbcType="Double" nullValue="0"/>
		<result property="cjje" column="CJJE" jdbcType="Double" nullValue="0"/>	
		<result property="sy" column="sy" jdbcType="Double" nullValue="0"/>
		<result property="jz" column="jz" jdbcType="Double" nullValue="0"/>
		<result property="lb" column="lb" jdbcType="Double" nullValue="0"/>
		<result property="amp" column="amp" jdbcType="Double" nullValue="0"/>
		<result property="gb" column="gb" jdbcType="Double" nullValue="0"/>
		<result property="ltsl" column="ltsl" jdbcType="Double" nullValue="0"/>
		<result property="wb" column="wb" jdbcType="Double" nullValue="0"/>
</resultMap>
<resultMap id="QuoteMap3" class="Quote">
		<result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zqpy" column="ZQPY" jdbcType="String"/>
</resultMap>

<resultMap id="QuoteMap4" class="Quote">
		<result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zqpy" column="ZQPY" jdbcType="String"/>
		<result property="exchange" column="EXCHANGE" jdbcType="Integer"/>
</resultMap>
<resultMap id="QuoteMap5" class="Quote">
		<result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zjcj" column="ZJCJ" jdbcType="String"/>
		<result property="exchange" column="EXCHANGE" jdbcType="Integer"/>
</resultMap>

<resultMap id="QuoteMap6" class="Quote">
        <result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zjcj" column="ZJCJ" jdbcType="Double" nullValue="0"/>
		<result property="zf" column="ZF" jdbcType="Double" nullValue="0"/>
		<result property="jrkp" column="JRKP" jdbcType="Double" nullValue="0"/>
		<result property="zgcj" column="ZGCJ" jdbcType="Double" nullValue="0"/>
		<result property="zdcj" column="ZDCJ" jdbcType="Double" nullValue="0"/>
		<result property="zd" column="ZD" jdbcType="Double" nullValue="0"/>
</resultMap>

<resultMap id="QuoteMap7" class="Quote">
        <result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zjcj" column="ZJCJ" jdbcType="Double" />
		<result property="zf" column="ZF" jdbcType="Double" />
		<result property="jrkp" column="JRKP" jdbcType="Double" />
		<result property="zgcj" column="ZGCJ" jdbcType="Double" />
		<result property="zdcj" column="ZDCJ" jdbcType="Double" />
		<result property="zd" column="ZD" jdbcType="Double" />
</resultMap>
<!-- 潘可荣 -->
<resultMap id="QuoteMap8" class="Quote">
        <result property="zqdm" column="ZQDM" jdbcType="String"/>
		<result property="zqjc" column="ZQJC" jdbcType="String"/>
		<result property="zjcj" column="ZJCJ" jdbcType="Double" nullValue="0"/>
		<result property="zf" column="ZF" jdbcType="Double" nullValue="0"/>
		<result property="jrkp" column="JRKP" jdbcType="Double" nullValue="0"/>
		<result property="zgcj" column="ZGCJ" jdbcType="Double" nullValue="0"/>
		<result property="zdcj" column="ZDCJ" jdbcType="Double" nullValue="0"/>
		<result property="zd" column="ZD" jdbcType="Double" nullValue="0"/>
		<result property="cjje" column="CJJE" jdbcType="Double"/>
</resultMap>
	<select id="getQuote" parameterClass="map" resultMap="QuoteMap" cacheModel="QuoteCache">
		select zqjc,zrsp,zjcj from quote where (zqdm='000001' and exchange=1) 
								or zqdm='399001' or zqdm='000300' order by zqdm
	</select>
	<select id="getQuoteByZqdm" parameterClass="String" resultMap = "QuoteMap1">
		$sql$
	</select>
	<select id="getQuoteListByZqdm" parameterClass="String" resultMap = "QuoteMap3">
		$sql$
	</select>
	<select id="getQuoteListByZqdm1" parameterClass="String" resultMap = "QuoteMap4">
		$sql$
	</select>	
	
	
	<!-- -->
	<select id="getQuoteBySql" parameterClass="String" resultMap="QuoteMap8">
		$sql$
	</select>
	
	
  	<select id="getQuoteMaxTime" resultClass = "java.util.Date">
		select max(quote_time) maxtime from quote
	</select>
	
	<select id="getByQuoteSql" parameterClass="String" resultMap = "QuoteMap1">
		select q.*,(case q.CJSL when 0 then 0 else (q.CJJE/q.CJSL/100) end) pjjg from ( $sql$ ) q
	</select>	
	
	<select id="getSzzs" parameterClass="String" resultMap = "QuoteMap1">
		select * from quote where zqdm='000001' and exchange=#value#
	</select>
	<select id="getSzCzZqdm" parameterClass="String" resultMap = "QuoteMap1">
		select * from quote where zqdm='399001'
	</select>
	<select id="getSzzsList" resultMap = "QuoteMap1" parameterClass="map">
		SELECT * FROM ( SELECT row_.*, ROWNUM rownum_ FROM ( $sql$ ) row_ WHERE ROWNUM &lt;= #end# ) WHERE rownum_ &gt;#begin#
	</select>
	<select id="getCjslList" resultMap = "QuoteMap1" parameterClass="map">
		SELECT * FROM ( SELECT row_.*, ROWNUM rownum_ FROM ( $sql$ ) row_ WHERE ROWNUM &lt;= #end# ) WHERE rownum_ &gt;#begin#
	</select>
	
	<select id="getQuoteByZqdmAndGplb" parameterClass="Map" resultMap="QuoteMap2">
		select * FROM QUOTE where zqdm =#zqdm# and zqlb in $zqlb$
	</select>
	
	<select id="getQuotePriceByZqdm" parameterClass="Map" resultMap="QuoteMap5">
		select ZQDM,ZQJC,ZJCJ,EXCHANGE FROM QUOTE where zqdm =#zqdm# 
		<isNotEmpty prepend="AND" property="exchange">
    		EXCHANGE = #exchange#
    	</isNotEmpty>
	</select>
	
	<select id="getQuoteHq" resultMap="QuoteMap6" parameterClass="Map" >
	   SELECT * FROM ( SELECT row_.*, ROWNUM rownum_ FROM ( $condition$ )
		row_ WHERE ROWNUM &lt;= #endNum# ) WHERE rownum_ &gt;#beginNum#
	</select>
	
	<select id="getQuoteCount" resultClass="Integer" parameterClass="Map" >
	  select count(*) from quote where zqlb in (3,13,33) and QUOTE_TIME=(select max(QUOTE_TIME) from quote) and zjcj is not null and zf is not null and jrkp is not null and zgcj is not null and zdcj is not null and zd is not null
	</select>
</sqlMap>

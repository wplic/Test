<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
		"http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- iBatis SQL Map 文件 -->
<sqlMap namespace="com.cssweb.theme.pojo.ThemeNews">

	<typeAlias alias="ThemeNews" type="com.cssweb.theme.pojo.ThemeNews" />

	<resultMap id="ThemeNewsMap" class="ThemeNews">
		<result property="id" column="ID" jdbcType="Long"/>
		<result property="categoryid" column="CATEGORYID" jdbcType="Long"/>
		<result property="title" column="TITLE" jdbcType="String"/>
		<result property="author" column="AUTHOR" jdbcType="String"/>
		<result property="source" column="SOURCE" jdbcType="String"/>
		<result property="publicationtime" column="PUBLICATIONTIME" jdbcType="Date"/>
		<result property="content" column="CONTENT" jdbcType="Blob"/>
		<result property="fileid" column="FILEID" jdbcType="Long" nullValue="0"/>
	</resultMap>

	<resultMap id="ThemeNewsMap2" class="ThemeNews">
		<result property="id" column="ID" jdbcType="Long"/>
		<result property="category" column="CATEGORY" jdbcType="String"/>
		<result property="title" column="TITLE" jdbcType="String"/>
		<result property="author" column="AUTHOR" jdbcType="String"/>
		<result property="source" column="SOURCE" jdbcType="String"/>
		<result property="publicationtime" column="PUBLICATIONTIME" jdbcType="Date"/>
	</resultMap>
	
	<resultMap id="ThemeNewsMap3" class="ThemeNews">
		<result property="id" column="ID" jdbcType="Long"/>
		<result property="title" column="TITLE" jdbcType="String"/>
		<result property="author" column="AUTHOR" jdbcType="String"/>
		<result property="source" column="SOURCE" jdbcType="String"/>
		<result property="publicationtime" column="PUBLICATIONTIME" jdbcType="Date"/>
	</resultMap>

	<insert id="insert" parameterClass="ThemeNews">
		INSERT into T_THEME_NEWS (ID,CATEGORYID,TITLE,AUTHOR,SOURCE,PUBLICATIONTIME,CONTENT) VALUES (#id#,#categoryid#,#title#,#author#,#source#,sysdate,#content#)
	</insert>
	
	<update id="update" parameterClass="ThemeNews">
		update T_THEME_NEWS set CATEGORYID=#categoryid#,TITLE=#title#,AUTHOR=#author#,SOURCE=#source#,PUBLICATIONTIME=sysdate,CONTENT=#content# where ID=#id#
	</update>
	
	<update id="updateFileid" parameterClass="ThemeNews">
		update T_THEME_NEWS set FILEID=#fileid#  where ID=#id#
	</update>

	<delete id="delete" parameterClass="String">
		delete from T_THEME_NEWS where ID in ($value$)
	</delete>
	
	<delete id="deleteById" parameterClass="Long">
		delete from T_THEME_NEWS where ID = #value#
	</delete>
		
	<select id="getAll" resultMap="ThemeNewsMap">
		select * from T_THEME_NEWS ORDER BY ID
	</select>

	<select id="getCountByCategory" parameterClass="Long" resultClass="java.lang.Integer">
		select count(*) from T_THEME_NEWS  where CATEGORYID = #categoryid#
	</select>

	<select id="getCountBySql" parameterClass="String" resultClass="java.lang.Integer">
		$sql$
	</select>

	<select id="getById" parameterClass="Long" resultMap="ThemeNewsMap">
		select * from T_THEME_NEWS where ID= #id#
	</select>	
	
	  <select id="getFrontByMap" parameterClass="java.util.Map" resultMap = "ThemeNewsMap3">
    	SELECT * FROM ( 
    		SELECT row_.*, ROWNUM rownum_ FROM (
    		 	$sql$
    		 )
			row_ WHERE ROWNUM &lt;= #end# 
		) WHERE rownum_ &gt;#begin#
  	</select>
	
	  <select id="getAdminByMap" parameterClass="java.util.Map" resultMap = "ThemeNewsMap2">
    	SELECT * FROM ( 
    		SELECT row_.*, ROWNUM rownum_ FROM (
    		 	$sql$
    		 )
			row_ WHERE ROWNUM &lt;= #end# 
		) WHERE rownum_ &gt;#begin#
  	</select>
	
</sqlMap>

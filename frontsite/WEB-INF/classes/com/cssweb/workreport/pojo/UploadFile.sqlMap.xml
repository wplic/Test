<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="com.cssweb.workreport.pojo.UploadFile">
	<typeAlias alias="UploadFile" type="com.cssweb.workreport.pojo.UploadFile"/>
	
	<resultMap id="uploadFileMap" class="UploadFile">
		<result column="ID" property="id" jdbcType="long"/>
		<result column="FILE_TYPE" property="fileType" jdbcType="String"/>
		<result column="FILE_NAME" property="fileName" jdbcType="String"/>
		<result column="FILE_SIZE" property="size" jdbcType="long"/>
		<result column="ADD_DATE" property="addDate" jdbcType="java.util.Date"/>
		<result column="FILE_SOURCE" property="source" jdbcType="BLOB"/>
		<result column="REMARK" property="remark" jdbcType="String"/>
		<result column="EXT1" property="ext1" jdbcType="String"/>
		<result column="EXT2" property="ext2" jdbcType="String"/>
		<result column="EXT3" property="ext3" jdbcType="String"/>
	</resultMap>
	<resultMap id="uploadFileMap2" class="UploadFile">
		<result column="ID" property="id" jdbcType="long"/>
		<result column="FILE_TYPE" property="fileType" jdbcType="String"/>
		<result column="FILE_SOURCE" property="source" jdbcType="BLOB"/>
	</resultMap>
	<select id="getUploadFileById" parameterClass="Long"  resultMap="uploadFileMap">
		select ID,FILE_TYPE,FILE_NAME,FILE_SIZE,ADD_DATE,FILE_SOURCE,REMARK,EXT1,EXT2,EXT3
		from UPLOAD_FILES where ID=#value#
	</select>

	<select id="getUploadFileByCmsDocId" parameterClass="Long"  resultMap="uploadFileMap2">
		select DOC_ID AS ID,CONTENT_TYPE AS FILE_TYPE,CONTENT AS FILE_SOURCE
		from CMS_DOC_BODY where DOC_ID=#value#
	</select>
	<insert id="insert" parameterClass="UploadFile">
		insert into UPLOAD_FILES(ID,FILE_TYPE,FILE_NAME,FILE_SIZE,ADD_DATE,FILE_SOURCE,REMARK,EXT1,EXT2,EXT3) 
					values(#id#,#fileType#,#fileName#,#size#,#addDate#,#source#,#remark#,#ext1#,#ext2#,#ext3#)
	</insert>
	<update id="update" parameterClass="UploadFile">
		update UPLOAD_FILES set FILE_TYPE = #fileType#, FILE_NAME =#fileName#, FILE_SIZE = #size#, ADD_DATE = #addDate#,
		FILE_SOURCE = #source#, REMARK = #remark#,EXT1 = #ext1#, EXT2 = #ext2#, EXT3 = #ext3# where ID = #id#
	</update>
   <delete id="deleteById" parameterClass="Long">
		delete from UPLOAD_FILES where ID = #value#
	</delete>
</sqlMap>
